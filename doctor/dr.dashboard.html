<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <main class="flex justify-between ">
        <div class="flex fixed h-screen w-16 flex-col justify-between border-e bg-white">
            <div>
                <div class="p-4 inline-flex size-16 items-center justify-center">
                    <svg id="logo-37" width="42" height="38" viewBox="0 0 42 38" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M5.74661 28.7259C7.28678 29.8002 9.78389 29.8002 11.3241 28.7259C12.8642 27.6516 12.8642 25.9098 11.3241 24.8355C9.78389 23.7612 7.28678 23.7612 5.74661 24.8355C4.20644 25.9098 4.20644 27.6516 5.74661 28.7259Z"
                            class="ccustom" fill="#25CAAC"></path>
                        <path
                            d="M21.7322 14.1371C24.0425 15.7485 27.7881 15.7485 30.0984 14.1371C32.4086 12.5256 32.4086 9.91298 30.0984 8.30155C27.7881 6.69011 24.0425 6.69011 21.7322 8.30155C19.422 9.91298 19.422 12.5256 21.7322 14.1371Z"
                            class="ccustom" fill="#25CAAC"></path>
                        <path
                            d="M13.2464 21.4315C15.1716 22.7743 18.293 22.7743 20.2182 21.4315C22.1434 20.0886 22.1434 17.9114 20.2182 16.5685C18.293 15.2257 15.1716 15.2257 13.2464 16.5685C11.3212 17.9114 11.3212 20.0886 13.2464 21.4315Z"
                            class="ccustom" fill="#25CAAC"></path>
                        <path
                            d="M0.866345 20.4589C2.02147 21.2646 3.8943 21.2646 5.04943 20.4589C6.20455 19.6532 6.20455 18.3469 5.04943 17.5411C3.8943 16.7354 2.02147 16.7354 0.866345 17.5411C-0.288782 18.3469 -0.288781 19.6532 0.866345 20.4589Z"
                            class="ccustom" fill="#25CAAC"></path>
                        <path
                            d="M13.2464 5.87008C15.1716 7.21294 18.293 7.21294 20.2182 5.87008C22.1434 4.52722 22.1434 2.35001 20.2182 1.00715C18.293 -0.335715 15.1716 -0.335716 13.2464 1.00715C11.3212 2.35001 11.3212 4.52722 13.2464 5.87008Z"
                            class="ccustom" fill="#25CAAC"></path>
                        <path
                            d="M5.74661 13.1645C7.28678 14.2388 9.78389 14.2388 11.3241 13.1645C12.8642 12.0902 12.8642 10.3484 11.3241 9.27415C9.78389 8.19986 7.28678 8.19986 5.74661 9.27415C4.20644 10.3484 4.20645 12.0902 5.74661 13.1645Z"
                            class="ccustom" fill="#25CAAC"></path>
                        <path
                            d="M13.2464 36.9929C15.1716 38.3357 18.293 38.3357 20.2182 36.9929C22.1434 35.65 22.1434 33.4728 20.2182 32.1299C18.293 30.7871 15.1716 30.7871 13.2464 32.1299C11.3212 33.4728 11.3212 35.65 13.2464 36.9929Z"
                            class="ccustom" fill="#25CAAC"></path>
                        <path
                            d="M31.9011 21.9178C34.2114 23.5292 37.9571 23.5292 40.2673 21.9178C42.5776 20.3064 42.5776 17.6937 40.2673 16.0823C37.9571 14.4708 34.2114 14.4708 31.9011 16.0823C29.5909 17.6937 29.5909 20.3064 31.9011 21.9178Z"
                            class="ccustom" fill="#25CAAC"></path>
                        <path
                            d="M21.7322 29.6984C24.0425 31.3099 27.7881 31.3099 30.0984 29.6984C32.4086 28.087 32.4086 25.4744 30.0984 23.8629C27.7881 22.2515 24.0425 22.2515 21.7322 23.8629C19.422 25.4744 19.422 28.087 21.7322 29.6984Z"
                            class="ccustom" fill="#25CAAC"></path>
                    </svg>
                </div>

                <div class="border-t border-gray-100">
                    <div class="px-2">
                        <div class="py-4">
                            <a href="#"
                                class="t group relative flex justify-center rounded bg-teal-50 px-2 py-1.5 text-teal-700">
                                <svg xmlns="http://www.w3.org/2000/svg" class="size-5 opacity-75" fill="none"
                                    viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>

                                <span
                                    class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible">
                                    General
                                </span>
                            </a>
                        </div>

                        <ul class="space-y-1 border-t border-gray-100 pt-4">
                            <li>
                                <a href="#"
                                    class="group relative flex justify-center rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="size-5 opacity-75" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                    </svg>

                                    <span
                                        class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible">
                                        Teams
                                    </span>
                                </a>
                            </li>

                            <li>
                                <a href="#"
                                    class="group relative flex justify-center rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="size-5 opacity-75" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                                    </svg>

                                    <span
                                        class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible">
                                        Billing
                                    </span>
                                </a>
                            </li>

                            <li>
                                <a href="#"
                                    class="group relative flex justify-center rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="size-5 opacity-75" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                                    </svg>

                                    <span
                                        class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible">
                                        Invoices
                                    </span>
                                </a>
                            </li>

                            <li>
                                <a href="#"
                                    class="group relative flex justify-center rounded px-2 py-1.5 text-gray-500 hover:bg-gray-50 hover:text-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="size-5 opacity-75" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                    </svg>

                                    <span
                                        class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible">
                                        Account
                                    </span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="sticky inset-x-0 bottom-0 border-t border-gray-100 bg-white p-2">
                <form>
                    <button id="logoutButton" type="submit"
                        class="group relative flex w-full justify-center rounded-lg px-2 py-1.5 text-sm text-gray-500 hover:bg-gray-50 hover:text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5 opacity-75" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                        </svg>

                        <span
                            class="invisible absolute start-full top-1/2 ms-4 -translate-y-1/2 rounded bg-gray-900 px-2 py-1.5 text-xs font-medium text-white group-hover:visible">
                            Logout
                        </span>
                    </button>
                </form>
            </div>
        </div>
        <div class="w-full ml-[60px]">
            <div class="bg-teal-600 px-4 py-3 text-white sm:flex sm:items-center sm:justify-between sm:px-6 lg:px-8">
                <br>
                <p class="text-center font-medium sm:text-left">
                    Welcome to your dashboard! <span class="underline" id="user"></span>
                </p>
            </div>
            <main>
                <section
                    class="overflow-hidden bg-[url(https://images.unsplash.com/photo-1450101499163-c8848c66ca85?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)] bg-cover bg-top bg-no-repeat">
                    <div class="bg-black/50 p-8 md:p-12 lg:px-16 lg:py-24">
                        <div class=" ltr:sm:text-left rtl:sm:text-right">
                            <h2 class="text-2xl font-bold text-white sm:text-3xl md:text-5xl">Dashboard</h2>

                            <p class="hidden max-w-lg text-white/90 md:mt-6 md:block md:text-lg md:leading-relaxed">Manage your Profile and patient information
                            </p>

                            <div class="mt-4 sm:mt-8">
                                <a href="#"
                                    class="inline-block rounded-full bg-teal-600 px-12 py-3 text-sm font-medium text-white transition hover:bg-teal-700 focus:outline-none focus:ring focus:ring-yellow-400">
                                    Get Yours Today
                                </a>
                            </div>
                        </div>
                    </div>
                </section>
                <div class="grid grid-cols-1 mt-4 p-4 gap-4 lg:grid-cols-3 lg:gap-8">
                    <div class=" rounded-lg bg-gray-200">
                        <article class="overflow-hidden rounded-lg shadow transition hover:shadow-lg">
                            <img alt=""
                            src="https://images.unsplash.com/photo-1680602240404-9dd4576d3aa6?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="h-56 w-full object-cover" />

                            <div class="bg-white p-4 sm:p-6">
                                <time datetime="2022-10-10" class="block text-xs text-gray-500"> FREE </time>

                                <a href="#">
                                    <h3 class="mt-0.5 text-lg text-gray-900">NOt yet Defiend</h3>
                                </a>

                                <p class="mt-2 line-clamp-3 text-sm/relaxed text-gray-500">
                                    Take our scientifically-backed quizzes to assess your behavior patterns, thoughts, and emotions. These quizzes offer valuable insights into your mental health, helping you understand areas for improvement.
                                </p>
                            </div>
                        </article>
                    </div>
                    <div class="rounded-lg bg-gray-200">
                        <article class="overflow-hidden rounded-lg shadow transition hover:shadow-lg">
                            <img alt=""
                            src="https://images.unsplash.com/photo-1551847677-dc82d764e1eb?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="h-56 w-full object-cover" />

                            <div class="bg-white p-4 sm:p-6">
                                <time datetime="2022-10-10" class="block text-xs text-gray-500"> IMP</time>

                                <a href="/doctor/dr.comp_Profile.html">
                                    <h3 class="mt-0.5 text-lg text-gray-900">Complete Your Profile</h3>
                                </a>

                                <p class="mt-2 line-clamp-3 text-sm/relaxed text-gray-500">
                                    Book your appointment today and take the first step towards improving your mental well-being. Our Cognitive Behavioral Therapy (CBT) experts are here to help you develop effective coping strategies tailored to your needs. Select a convenient time and begin your journey towards a healthier mind and balanced life.
                                </p>
                            </div>
                        </article>
                    </div>
                    <div class=" rounded-lg bg-gray-200">
                        <article class="overflow-hidden rounded-lg shadow transition hover:shadow-lg">
                            <img alt=""
                            src="https://images.unsplash.com/photo-1680602240404-9dd4576d3aa6?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"  
                            class="h-56 w-full object-cover" />

                            <div class="bg-white p-4 sm:p-6">
                                <time datetime="2022-10-10" class="block text-xs text-gray-500">FREE</time>

                                <a href="#">
                                    <h3 class="mt-0.5 text-lg text-gray-900">Manage the appointment</h3>
                                </a>

                                <p class="mt-2 line-clamp-3 text-sm/relaxed text-gray-500">
                                    Create custom CBT tools that fit your unique needs! Use our intuitive builder to design personalized worksheets, mood trackers, and coping strategies to help you stay on track with your mental health journey.
                                </p>
                            </div>
                        </article>
                    </div>
                    <div class="rounded-lg bg-gray-200">
                        <article class="overflow-hidden rounded-lg shadow transition hover:shadow-lg">
                            <img alt=""
                            src="https://images.unsplash.com/photo-1467664631004-58beab1ece0d?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                           class="h-56 w-full object-cover" />

                            <div class="bg-white p-4 sm:p-6">
                                <time datetime="2022-10-10" class="block text-xs text-gray-500">FREE</time>

                                <a href="#">
                                    <h3 class="mt-0.5 text-lg text-gray-900">Contact the patient</h3>
                                </a>

                                <p class="mt-2 line-clamp-3 text-sm/relaxed text-gray-500">
                                    Connect with a licensed CBT specialist to get personalized advice and guidance on managing mental health challenges. Schedule a consultation to receive expert support and create a therapy plan tailored just for you   </p>
                            </div>
                        </article>
                    </div>
                    <div class=" rounded-lg bg-gray-200">
                        <article class="overflow-hidden rounded-lg shadow transition hover:shadow-lg">
                            <img alt=""
                            src="https://images.unsplash.com/photo-1616628188524-65a2deb4f06f?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"   
                             class="h-56 w-full object-cover" />

                            <div class="bg-white p-4 sm:p-6">

                                <time datetime="2022-10-10" class="block text-xs text-gray-500">FREE</time>
                                <a href="#">
                                    <h3 class="mt-0.5 text-lg text-gray-900">Manage the Paitent</h3>
                                </a>

                                <p class="mt-2 line-clamp-3 text-sm/relaxed text-gray-500">
                                    Need quick assistance or want to talk through your thoughts? Our AI-powered CBT chatbot is available 24/7 to guide you through techniques and exercises designed to help manage stress, anxiety, and more.
                                    </p>

                            </div>
                        </article>
                    </div>
                </div>
            </main>
        </div>
</main>

        <!-- <div class="fixed inset-x-0 bottom-0">
        <div class="bg-teal-600 ml-[65px] px-4 py-3 text-white">
          <p class="text-center text-sm font-medium">
            Design and Developed by
            <a href="https://chiragtyagi.netlify.app" class="inline-block underline">@Chirag_Creates </a>
          </p>
        </div>
      </div> -->




        <script>
            function handleClick() {
                document.getElementById("hidden").classList.toggle("hidden");
            }
            // Function to check authentication and redirect if not 
            async function checkAuth() {
                const token = localStorage.getItem("token");

                if (!token) {
                    window.location.href = "/login.html";
                    return;
                }

                try {
                    const response = await fetch("http://localhost:3000/doctor/dashboard", {
                        method: "GET",
                        headers: {
                            Authorization: `Bearer ${token}`,
                        },
                    });

                    if (response.status === 401 || response.status === 403) {
                        window.location.href = "/login.html";
                    } else if (!response.ok) {
                        console.error("Error:", await response.text());
                        window.location.href = "/login.html";
                    } else {
                        const data = await response.json();
                        console.log(data.userDetails);

                        document.getElementById("user").innerHTML = data.message;
                        // document.getElementById("userd").innerHTML = data.userDetails.first_name;
                        // Display the username in the welcome message
                    }
                } catch (error) {
                    console.error("Error:", error);
                    window.location.href = "/sign-in.html";
                }
            }
            checkAuth();

            // Add event listener to logout button
            document
                .getElementById("logoutButton")
                .addEventListener("click", async () => {
                    const token = localStorage.getItem("token");

                    if (!token) {
                        alert("You are not logged in");
                        return;
                    }

                    try {
                        const response = await fetch("http://localhost:3000/doctor/logout", {
                            method: "POST",
                            headers: {
                                Authorization: `Bearer ${token}`,
                            },
                        });

                        if (response.ok) {
                            // Remove the token and redirect to login page
                            alert("Logging off successfully");
                            localStorage.removeItem("token");
                            window.location.href = "/sign-in.html";
                        } else {
                            alert("Logout failed");
                        }
                    } catch (error) {
                        console.error("Error:", error);
                        alert("An error occurred during logout");
                    }
                });
        </script>
</body>

</html>